<?xml version="1.0" encoding="UTF-8"?>
<configuration monitorInterval="60">
  <properties>
    <property name="logpath">./logs</property>
  </properties>
  <appenders>
    <!--####################################-->
    <!--# catalina输出(方便开发调试用)-->
    <!--####################################-->
    <Console name="console" target="SYSTEM_OUT">
      <!--<PatternLayout pattern="${pattern}"/>-->
      <SFPatternLayout/>
    </Console>
    <!--####################################-->
    <!--# SF.TRACE日志(按天保存,最多保留3天)-->
    <!--####################################-->
    <RollingRandomAccessFile name="SF.TRACE" immediateFlush="true" bufferSize="1024"
      fileName="${logpath}/trace.log"
      filePattern="${logpath}/trace.log.%d{yyyy-MM-dd}.gz">
      <SFPatternLayout/>
      <TimeBasedTriggeringPolicy/>
      <DefaultRolloverStrategy>
        <Delete basePath="${logpath}" maxDepth="2">
          <IfFileName glob="trace.log.*.gz"/>
          <IfLastModified age="3d"/>
        </Delete>
      </DefaultRolloverStrategy>
    </RollingRandomAccessFile>
    <RollingRandomAccessFile name="SF.SYSTEM" immediateFlush="true" bufferSize="4096"
      fileName="${logpath}/system.log"
      filePattern="${logpath}/system.log.%d{yyyy-MM-dd}.gz"
      ignoreExceptions="false">
      <SFPatternLayout/>
      <Filters>
        <ThresholdFilter level="TRACE" onMatch="ACCEPT" onMismatch="DENY"/>
        <ThresholdFilter level="DEBUG" onMatch="ACCEPT" onMismatch="DENY"/>
        <ThresholdFilter level="INFO" onMatch="ACCEPT" onMismatch="DENY"/>
      </Filters>
      <TimeBasedTriggeringPolicy/>
      <DefaultRolloverStrategy>
        <Delete basePath="${logpath}" maxDepth="2">
          <IfFileName glob="system.log.*.gz"/>
          <IfLastModified age="7d"/>
        </Delete>
      </DefaultRolloverStrategy>
    </RollingRandomAccessFile>
    <RollingRandomAccessFile name="SF.ERROR" immediateFlush="true" bufferSize="4096"
      fileName="${logpath}/error.log"
      filePattern="${logpath}/error.log.%d{yyyy-MM-dd}.gz"
      ignoreExceptions="false">
      <SFPatternLayout/>
      <Filters>
        <ThresholdFilter level="ERROR" onMatch="ACCEPT" onMismatch="DENY"/>
      </Filters>
      <TimeBasedTriggeringPolicy/>
      <DefaultRolloverStrategy>
        <Delete basePath="${logpath}" maxDepth="2">
          <IfFileName glob="error.log.*.gz"/>
          <IfLastModified age="7d"/>
        </Delete>
      </DefaultRolloverStrategy>
    </RollingRandomAccessFile>
    <RollingRandomAccessFile name="SF.AUDIT" immediateFlush="false" bufferSize="8192"
      fileName="${logpath}/audit.log"
      filePattern="${logpath}/audit.log.%d{yyyy-MM-dd}.gz"
      ignoreExceptions="false">
      <SFPatternLayout/>
      <Filters>
        <ThresholdFilter level="WARN" onMatch="ACCEPT" onMismatch="DENY"/>
      </Filters>
      <TimeBasedTriggeringPolicy/>
      <DefaultRolloverStrategy>
        <Delete basePath="${logpath}" maxDepth="2">
          <IfFileName glob="audit.log.*.gz"/>
          <IfLastModified age="7d"/>
        </Delete>
      </DefaultRolloverStrategy>
    </RollingRandomAccessFile>
    <RollingRandomAccessFile name="SF.POOL" immediateFlush="true" bufferSize="1024"
      fileName="${logpath}/pool.log"
      filePattern="${logpath}/pool.log.%d{yyyy-MM-dd}.gz"
      ignoreExceptions="false">
      <SFPatternLayout/>
      <TimeBasedTriggeringPolicy/>
      <DefaultRolloverStrategy>
        <Delete basePath="${logpath}" maxDepth="2">
          <IfFileName glob="pool.log.*.gz"/>
          <IfLastModified age="3d"/>
        </Delete>
      </DefaultRolloverStrategy>
    </RollingRandomAccessFile>
    <RollingRandomAccessFile name="SF.MONITOR" immediateFlush="true" bufferSize="1024"
      fileName="${logpath}/monitor.log"
      filePattern="${logpath}/pool.log.%d{yyyy-MM-dd}.gz"
      ignoreExceptions="false">
      <SFPatternLayout/>
      <TimeBasedTriggeringPolicy/>
      <DefaultRolloverStrategy>
        <Delete basePath="${logpath}" maxDepth="2">
          <IfFileName glob="pool.log.*.gz"/>
          <IfLastModified age="3d"/>
        </Delete>
      </DefaultRolloverStrategy>
    </RollingRandomAccessFile>
    <RollingRandomAccessFile name="SF.BIZ" immediateFlush="true"
      fileName="${logpath}/biz.log"
      filePattern="${logpath}/biz.log.%d{yyyy-MM-dd}.gz"
      ignoreExceptions="false">
      <SFPatternLayout/>
      <TimeBasedTriggeringPolicy/>
      <DefaultRolloverStrategy>
        <Delete basePath="${logpath}" maxDepth="2">
          <IfFileName glob="biz.log.*.gz"/>
          <IfLastModified age="7d"/>
        </Delete>
      </DefaultRolloverStrategy>
    </RollingRandomAccessFile>
  </appenders>
  <loggers>
    <!--<Logger additivity="false" name="org.example.framework.plugins.trace" level="INFO">-->
    <Logger additivity="false" name="SF.TRACE" level="INFO">
      <AppenderRef ref="SF.TRACE"/>
    </Logger>
    <Logger additivity="false" name="SF.SYSTEM" level="INFO">
      <AppenderRef ref="SF.SYSTEM"/>
      <AppenderRef ref="SF.ERROR"/>
    </Logger>
    <Logger additivity="false" name="SF.BIZ" level="INFO">
      <AppenderRef ref="SF.BIZ"/>
    </Logger>
    <Logger additivity="false" name="org.apache" level="ERROR">
      <AppenderRef ref="console"/>
    </Logger>
    <Logger additivity="false"
      name="com.alibaba.dubbo.common.threadpool.monitor.MonitorPoolRunnable" level="INFO">
      <AppenderRef ref="SF.POOL"/>
    </Logger>
    <Logger additivity="false" name="com.alibaba.dubbo.monitor.dubbo.sfextend.SfMonitorExtend"
      level="INFO">
      <AppenderRef ref="SF.MONITOR"/>
    </Logger>
    <!--针对，request以及reponse的信息配置输出级别，生产线请配置为error-->
    <Logger additivity="true" name="com.alibaba.dubbo.rpc.protocol.rest.support" level="INFO">
      <AppenderRef ref="console"/>
    </Logger>
    <!-- 在开发和测试环境启用,输出sql -->
    <Logger additivity="true" name="org.example.sgs.smp.dao.mapper" level="DEBUG">
    </Logger>
    <Root level="INFO" includeLocation="true">
      <!--开发过程可以开启，生产要求屏蔽-->
      <AppenderRef ref="console"/>
      <AppenderRef ref="SF.SYSTEM"/>
      <AppenderRef ref="SF.ERROR"/>
      <AppenderRef ref="SF.AUDIT"/>
    </Root>
  </loggers>
</configuration>